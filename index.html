<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Alias de E-mail</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-image: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            color: #333;
        }

        /* Container */
        .container {
            background-color: #ffffff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 100%;
            max-width: 650px; /* Max-width for overall container */
            border: 1px solid #e0e6ed;
            transition: max-width 0.4s ease-in-out; /* Smooth transition for container size */
        }
        /* Adjusted max-width for advanced mode */
        body.active-mode-advanced .container { /* Corrected class for advanced mode */
            max-width: 700px; 
        }

        /* Headings & Paragraphs */
        h1 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 700;
        }
        p {
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        h3 {
            color: #3d5a80;
            font-size: 1.3em;
            margin-top: 0;
            margin-bottom: 15px;
        }

        /* Labels & Inputs */
        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            text-align: left;
            font-size: 0.95em;
        }
        input[type="email"],
        input[type="text"],
        input[type="number"],
        select {
            width: calc(100% - 24px); /* Account for padding */
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ccd6e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
        }
        input[type="email"]:focus,
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
            outline: none;
        }

        /* Button Sections */
        .button-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px dashed #c0d3e7;
            border-radius: 10px;
            background-color: #f7fafd;
            text-align: left; /* Align labels/inputs left */
        }
        .button-section p {
            font-size: 0.9em;
            color: #777;
            margin-top: 5px;
            margin-bottom: 15px;
            text-align: center; /* Center notes */
        }

        /* Button Group */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px; /* Space above buttons in group */
        }

        /* Buttons */
        button {
            color: white;
            padding: 12px 22px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-width: 180px; /* Ensure consistent button width */
        }
        button:hover {
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }

        /* Specific Button Colors */
        .btn-gmail { /* Renamed for clarity */
            background-color: #4CAF50; /* Green */
        }
        .btn-gmail:hover {
            background-color: #45a049;
        }
        .btn-googlemail { /* Renamed for clarity */
            background-color: #f4b400; /* Google's Yellow-Orange */
        }
        .btn-googlemail:hover {
            background-color: #e0a300;
        }
        .btn-mode-toggle { /* Style for Advanced/Simple Mode button */
            background-color: #17a2b8; /* Info blue */
            min-width: unset; /* Don't force min-width */
            margin-top: 25px;
            margin-bottom: 20px;
        }
        .btn-mode-toggle:hover {
            background-color: #138496;
        }
        .btn-utility {
            background-color: #007bff; /* Blue */
            margin-top: 25px; /* Space from other sections */
            min-width: unset; /* Override min-width for utility buttons */
        }
        .btn-utility:hover {
            background-color: #0056b3;
        }
        .btn-clear {
            background-color: #f44336; /* Red for clear */
        }
        .btn-clear:hover {
            background-color: #da190b;
        }

        /* Result Display */
        .result {
            margin-top: 30px;
            padding: 20px;
            background-color: #e6f0f7;
            border-radius: 10px;
            word-break: break-all;
            font-size: 20px;
            color: #2c3e50;
            font-weight: bold;
            border: 1px dashed #a4c8e0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Messages */
        .message {
            margin-top: 20px;
            font-size: 15px;
            color: #d9534f;
            font-weight: 500;
        }
        .message.success {
            color: #5cb85c;
        }

        /* Checkbox/Toggle Styles */
        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Align checkbox to left */
            margin-bottom: 15px;
            gap: 10px;
            font-size: 1em;
            color: #4a5568;
            font-weight: 500;
        }
        .toggle-switch input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
            background-color: #ccc;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 0; /* Override default input margin */
            vertical-align: middle; /* Align with text */
        }
        .toggle-switch input[type="checkbox"]:checked {
            background-color: #4CAF50;
        }
        .toggle-switch input[type="checkbox"]::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        .toggle-switch input[type="checkbox"]:checked::before {
            transform: translateX(20px);
        }

        /* Styling for disabled elements/sections */
        .disabled-option { /* New class to dim and disable specific options */
            opacity: 0.6;
            pointer-events: none;
        }
        .disabled-option label,
        .disabled-option input {
            cursor: not-allowed !important;
        }
        .disabled-option input[type="checkbox"] {
            background-color: #e0e0e0 !important;
        }
        .disabled-option .btn-gmail, 
        .disabled-option .btn-googlemail { /* Keep buttons enabled or manage them separately */
            pointer-events: all !important; /* Re-enable buttons if they are part of a disabled-option parent */
            opacity: 1 !important;
        }

        /* Hide/Show Modes */
        #advancedOptions {
            display: none; 
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none;
        }
        .active-mode-advanced #advancedOptions {
            display: block; 
            opacity: 1;
            pointer-events: all;
        }
        .active-mode-advanced #normalOptions {
            display: none; 
            opacity: 0;
            pointer-events: none;
        }
        #normalOptions {
            display: block;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
            pointer-events: all;
        }
    </style>
</head>
<body>
    <div class="container" id="mainContainer">
        <h1>🔑 Gerador de Alias de E-mail</h1>
        <p>Crie **aliases ilimitados** para sua conta Gmail/Googlemail. Gerencie seus e-mails e proteja sua privacidade com flexibilidade!</p>

        <label for="baseEmail">Seu E-mail Principal (ex: seu.nome@gmail.com):</label>
        <input type="email" id="baseEmail" placeholder="seu.nome@gmail.com" required oninput="updateModeSpecificOptions()">

        <div id="normalOptions">
            <div class="button-section">
                <h3>Alias Aleatório Simples</h3>
                <p>Gera um alias aleatório. Para **@gmail.com** é `seuemail+aleatorio@gmail.com`. Para **@googlemail.com** é `s.e.u.email@googlemail.com` (com pontos).</p>
                <div class="button-group">
                    <button class="btn-gmail" onclick="generateAlias('gmail.com', 'random', 8, false, '')" data-domain-type="gmail.com">Gerar @gmail.com</button>
                    <button class="btn-googlemail" onclick="generateAlias('googlemail.com', 'random', 8, true, '')" data-domain-type="googlemail.com">Gerar @googlemail.com</button>
                </div>
            </div>
        </div>

        <button id="modeToggleButton" class="btn-mode-toggle" onclick="toggleMode()">Ir para Modo Avançado</button>

        <div id="advancedOptions">
            <div class="button-section" id="gmailPlusAliasSection">
                <h3>Alias de Suffix (+) para Gmail</h3>
                <p>Gere aliases usando o caracter '+' seguido por uma string (aleatória ou personalizada). <br> **Esta funcionalidade é exclusiva para @gmail.com.**</p>
                
                <label for="randomLengthGmail">Comprimento da string aleatória (depois do "+"):</label>
                <input type="number" id="randomLengthGmail" value="8" min="4" max="15">

                <div class="button-group">
                    <button class="btn-gmail" onclick="generateAlias('gmail.com', 'random-plus', getEl('randomLengthGmail').value, false, '')" data-domain-type="gmail.com">Gerar Aleatório + (@gmail.com)</button>
                </div>

                <label for="customAliasStringGmail">Sua string personalizada (após o "+"):</label>
                <input type="text" id="customAliasStringGmail" placeholder="seu-alias-personalizado">
                <div class="button-group">
                    <button class="btn-gmail" onclick="generateAlias('gmail.com', 'custom-plus', null, null, getEl('customAliasStringGmail').value)" data-domain-type="gmail.com">Gerar Personalizado + (@gmail.com)</button>
                </div>
            </div>

            <div class="button-section" id="dotAliasSection">
                <h3>Alias com Pontos no Nome de Usuário</h3>
                <p>Adicione pontos aleatórios no nome de usuário. <br> Para **@gmail.com**, os pontos são ignorados. Para **@googlemail.com**, os pontos são significativos e criam um alias diferente.</p>
                
                <div class="toggle-switch" id="toggleSwitchDots">
                    <input type="checkbox" id="includeDots" checked>
                    <label for="includeDots">Habilitar pontos aleatórios no nome de usuário</label>
                </div>
                <p style="font-size:0.85em; color:#555; margin-top:-10px; margin-bottom:15px; text-align: left;" id="dotNote">
                    * Pontos em `@gmail.com` são ignorados. Pontos em `@googlemail.com` criam um novo alias.
                </p>

                <div class="button-group">
                    <button class="btn-gmail" onclick="generateAlias('gmail.com', 'random-dots', 0, getEl('includeDots').checked, '')" data-domain-type="gmail.com">Gerar Pontos (@gmail.com)</button>
                    <button class="btn-googlemail" onclick="generateAlias('googlemail.com', 'random-dots', 0, getEl('includeDots').checked, '')" data-domain-type="googlemail.com">Gerar Pontos (@googlemail.com)</button>
                </div>
            </div>
        </div>
        
        <button id="copyButton" class="btn-utility" onclick="copyAlias()">Copiar Alias Gerado</button>
        <button id="clearButton" class="btn-utility btn-clear" onclick="clearForm()">Limpar Tudo</button>

        <div class="result" id="aliasResult">
            Seu alias gerado aparecerá aqui.
        </div>
        <div class="message" id="statusMessage"></div>
    </div>

    <script>
        const getEl = (id) => document.getElementById(id);

        function generateAlias(domainType, aliasType, randomLength = 8, includeDots = false, customString = '') {
            const baseEmailInput = getEl('baseEmail');
            const aliasResultDiv = getEl('aliasResult');
            const statusMessageDiv = getEl('statusMessage');
            const copyButton = getEl('copyButton');

            const baseEmail = baseEmailInput.value.trim();
            
            statusMessageDiv.textContent = '';
            statusMessageDiv.className = 'message';
            aliasResultDiv.textContent = 'Seu alias gerado aparecerá aqui.';
            copyButton.style.display = 'none';

            if (!baseEmail) {
                statusMessageDiv.textContent = "Por favor, insira seu endereço de e-mail principal.";
                statusMessageDiv.style.color = '#d9534f';
                return;
            }

            const emailRegex = /^[^\s@]+@(gmail\.com|googlemail\.com)$/i;
            if (!emailRegex.test(baseEmail)) {
                statusMessageDiv.textContent = "O e-mail principal deve ser um endereço válido (@gmail.com ou @googlemail.com).";
                statusMessageDiv.style.color = '#d9534f';
                return;
            }

            let usernamePart = baseEmail.split('@')[0];
            let generatedAlias = '';

            // --- Gerar string aleatória (para + ou pontos) ---
            const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';
            let randomSuffix = '';
            if (aliasType === 'random-plus') {
                const effectiveRandomLength = Math.max(4, Math.min(15, parseInt(randomLength, 10) || 8)); 
                for (let i = 0; i < effectiveRandomLength; i++) {
                    randomSuffix += characters.charAt(Math.floor(Math.random() * characters.length));
                }
            } else if (aliasType === 'random-dots') {
                 // No suffix needed for random-dots, it manipulates the username itself
            }

            // --- Lógica de Geração de Alias por Tipo e Domínio ---
            if (domainType === 'gmail.com') {
                const cleanUsername = usernamePart.replace(/\./g, ''); // Gmail ignora pontos para a base

                if (aliasType === 'random-plus') {
                    generatedAlias = `${cleanUsername}+${randomSuffix}@gmail.com`;
                } else if (aliasType === 'custom-plus') {
                    const custom = customString || getEl('customAliasStringGmail').value.trim();
                    if (!custom) {
                        statusMessageDiv.textContent = "Para um alias personalizado, a string não pode estar vazia.";
                        statusMessageDiv.style.color = '#d9534f';
                        return;
                    }
                    if (!/^[a-zA-Z0-9-]+$/.test(custom)) {
                        statusMessageDiv.textContent = "A string personalizada deve conter apenas letras, números e hífens (-).";
                        statusMessageDiv.style.color = '#d9534f';
                        return;
                    }
                    generatedAlias = `${cleanUsername}+${custom}@gmail.com`;
                } else if (aliasType === 'random-dots') { // Gerar pontos para Gmail (serão ignorados, mas é um "alias" válido)
                    if (!includeDots) {
                        statusMessageDiv.textContent = "Selecione 'Habilitar pontos aleatórios' para gerar um alias com pontos.";
                        statusMessageDiv.style.color = '#d9534f';
                        return;
                    }
                    let tempUsernameWithDots = '';
                    // Generate points only if includeDots is true and domain is gmail.com
                    const baseForDots = usernamePart.replace(/\./g, ''); 
                    for (let i = 0; i < baseForDots.length; i++) {
                        tempUsernameWithDots += baseForDots[i];
                        if (i < baseForDots.length - 1 && Math.random() < 0.3) { 
                            tempUsernameWithDots += '.';
                        }
                    }
                    if (baseForDots.length > 1 && !tempUsernameWithDots.includes('.') && Math.random() < 0.7) { 
                         const randomIndex = Math.floor(Math.random() * (baseForDots.length - 1)) + 1;
                         tempUsernameWithDots = baseForDots.slice(0, randomIndex) + '.' + baseForDots.slice(randomIndex);
                    }
                    generatedAlias = `${tempUsernameWithDots}@gmail.com`;
                }
            } 
            else if (domainType === 'googlemail.com') {
                const originalUsername = usernamePart; // Googlemail considera pontos

                // Para Googlemail, qualquer geração de alias será com pontos, e SEM o '+'
                if (aliasType === 'random-dots' || aliasType === 'random' || aliasType === 'random-plus') { // Modo normal ou random-dots
                    if (!includeDots && getEl('mainContainer').classList.contains('active-mode-advanced')) { // If in advanced, and checkbox is OFF
                         statusMessageDiv.textContent = "Para @googlemail.com, a geração de alias no modo avançado implica em adicionar pontos.";
                         statusMessageDiv.style.color = '#d9534f';
                         return;
                    }
                    let tempUsernameWithDots = '';
                    const baseForDots = originalUsername.replace(/\./g, ''); // Começa de uma base limpa para adicionar pontos
                    if (baseForDots.length === 0) {
                        statusMessageDiv.textContent = "Nome de usuário muito curto para adicionar pontos.";
                        statusMessageDiv.style.color = '#d9534f';
                        return;
                    }

                    // Forçar pelo menos um ponto se o nome de usuário for grande o suficiente
                    if (baseForDots.length > 1) {
                         // Garante que pelo menos um ponto é adicionado, e pode adicionar mais
                        let currentUsername = baseForDots[0];
                        for (let i = 1; i < baseForDots.length; i++) {
                            // Adiciona ponto a cada 2-4 caracteres ou aleatoriamente
                            if ((i % 3 === 0 && i < baseForDots.length -1) || (Math.random() < 0.4 && i < baseForDots.length -1)) {
                                currentUsername += '.';
                            }
                            currentUsername += baseForDots[i];
                        }
                        // Fallback para garantir que tem pelo menos um ponto se o loop acima não adicionou e username é longo
                        if (!currentUsername.includes('.') && baseForDots.length > 1) {
                            const insertPos = Math.floor(baseForDots.length / 2);
                            currentUsername = baseForDots.slice(0, insertPos) + '.' + baseForDots.slice(insertPos);
                        }
                        tempUsernameWithDots = currentUsername;
                    } else { // Username is too short for meaningful dot alias, just use original
                        tempUsernameWithDots = originalUsername;
                    }

                    generatedAlias = `${tempUsernameWithDots}@googlemail.com`;

                } else if (aliasType === 'custom-plus') { // Custom alias for googlemail.com - just remove '+' part from prompt, only dot aliases are valid
                    statusMessageDiv.textContent = "Aliases com '+' não são suportados para @googlemail.com. Apenas aliases com pontos são válidos.";
                    statusMessageDiv.style.color = '#d9534f';
                    return;
                }
            }

            if (!generatedAlias) {
                statusMessageDiv.textContent = "Não foi possível gerar o alias. Verifique suas opções.";
                statusMessageDiv.style.color = '#d9534f';
                return;
            }

            aliasResultDiv.textContent = generatedAlias;
            copyButton.style.display = 'inline-block';
            statusMessageDiv.textContent = "Alias gerado com sucesso! 🎉";
            statusMessageDiv.className = 'message success';
        }

        function copyAlias() {
            const aliasResultDiv = getEl('aliasResult');
            const statusMessageDiv = getEl('statusMessage');
            const aliasText = aliasResultDiv.textContent;

            if (aliasText === 'Seu alias gerado aparecerá aqui.' || !aliasText.includes('@')) {
                statusMessageDiv.textContent = "Nenhum alias para copiar. Gere um primeiro!";
                statusMessageDiv.className = 'message';
                statusMessageDiv.style.color = '#d9534f';
                return;
            }

            navigator.clipboard.writeText(aliasText).then(() => {
                statusMessageDiv.textContent = "Alias copiado para a área de transferência! ✔️";
                statusMessageDiv.className = 'message success';
            }).catch(err => {
                console.error('Erro ao copiar: ', err);
                statusMessageDiv.textContent = "Erro ao copiar o alias. Por favor, copie manualmente.";
                statusMessageDiv.style.color = '#d9534f';
            });
        }

        function toggleMode() {
            const mainContainer = getEl('mainContainer'); 
            const modeToggleButton = getEl('modeToggleButton');
            
            const isAdvancedModeNow = !mainContainer.classList.contains('active-mode-advanced');

            if (isAdvancedModeNow) {
                mainContainer.classList.add('active-mode-advanced');
                modeToggleButton.textContent = 'Voltar para Modo Simples';
            } else {
                mainContainer.classList.remove('active-mode-advanced');
                modeToggleButton.textContent = 'Ir para Modo Avançado';
            }
            clearForm();
            updateModeSpecificOptions(); // Update options visibility based on mode and domain
        }

        function clearForm() {
            getEl('baseEmail').value = '';
            getEl('customAliasStringGmail').value = '';
            getEl('randomLengthGmail').value = 8;
            getEl('includeDots').checked = true; // Reset checkbox to checked for Gmail
            getEl('aliasResult').textContent = 'Seu alias gerado aparecerá aqui.';
            getEl('statusMessage').textContent = '';
            getEl('statusMessage').className = 'message';
            getEl('copyButton').style.display = 'none';
            updateModeSpecificOptions(); // Call to update options state
        }

        // --- NEW/UPDATED FUNCTION: updateModeSpecificOptions ---
        // This function now manages visibility/disability of options based on current domain AND mode
        function updateModeSpecificOptions() {
            const baseEmailInput = getEl('baseEmail');
            const emailValue = baseEmailInput.value.trim();
            const emailDomain = emailValue.split('@')[1];

            const gmailPlusAliasSection = getEl('gmailPlusAliasSection');
            const dotAliasSection = getEl('dotAliasSection');
            const toggleSwitchDotsDiv = getEl('toggleSwitchDots');
            const includeDotsCheckbox = getEl('includeDots');
            const customAliasStringGmail = getEl('customAliasStringGmail');
            const randomLengthGmail = getEl('randomLengthGmail');

            const isAdvancedModeActive = getEl('mainContainer').classList.contains('active-mode-advanced');

            if (isAdvancedModeActive) {
                if (emailDomain === 'googlemail.com') {
                    // Hide Gmail-specific (+) alias section
                    gmailPlusAliasSection.classList.add('disabled-option');
                    gmailPlusAliasSection.style.display = 'none'; // Ensure it's hidden

                    // Force dot alias logic for Googlemail
                    dotAliasSection.classList.remove('disabled-option'); // Ensure dot section is enabled
                    dotAliasSection.style.display = 'block'; // Ensure dot section is visible

                    // Control dot checkbox state for Googlemail
                    includeDotsCheckbox.disabled = true; // Disable checkbox
                    includeDotsCheckbox.checked = true; // Force checked state
                    toggleSwitchDotsDiv.classList.add('disabled-option'); // Dim the toggle switch

                    // Update dot note for Googlemail context
                    getEl('dotNote').textContent = "* Para @googlemail.com, a geração de alias implica em adicionar pontos no nome de usuário.";

                } else { // Default to gmail.com logic
                    // Show Gmail-specific (+) alias section
                    gmailPlusAliasSection.classList.remove('disabled-option');
                    gmailPlusAliasSection.style.display = 'block';

                    // Show dot alias section
                    dotAliasSection.classList.remove('disabled-option');
                    dotAliasSection.style.display = 'block';

                    // Enable dot checkbox for Gmail
                    includeDotsCheckbox.disabled = false;
                    toggleSwitchDotsDiv.classList.remove('disabled-option');
                    
                    // Reset dot note for Gmail context
                    getEl('dotNote').textContent = "* Pontos em `@gmail.com` são ignorados. Pontos em `@googlemail.com` criam um novo alias.";
                }
            } else { // Normal Mode - no advanced options visible/controlled here, just hide advanced sections
                gmailPlusAliasSection.classList.add('disabled-option');
                gmailPlusAliasSection.style.display = 'none';
                dotAliasSection.classList.add('disabled-option');
                dotAliasSection.style.display = 'none';
            }

            // Also, disable custom string and random length for Gmail when no domain is selected or invalid
            // This ensures inputs are consistent with button states
            if (!emailDomain || (emailDomain !== 'gmail.com' && emailDomain !== 'googlemail.com')) {
                gmailPlusAliasSection.classList.add('disabled-option');
                dotAliasSection.classList.add('disabled-option');
            } else if (emailDomain === 'gmail.com' && isAdvancedModeActive) {
                 // Re-enable for Gmail in advanced mode if it was disabled by invalid email
                gmailPlusAliasSection.classList.remove('disabled-option');
                dotAliasSection.classList.remove('disabled-option');
            }
        }

        // Initial setup on DOM load
        document.addEventListener('DOMContentLoaded', () => {
            const mainContainer = getEl('mainContainer');
            mainContainer.classList.remove('active-mode-advanced'); 
            getEl('modeToggleButton').textContent = 'Ir para Modo Avançado'; 
            updateModeSpecificOptions(); // Initial call to set options state
        });
    </script>
</body>
</html>
